webpackJsonp([1],{146:function(t,e,n){t.exports=n(147)},147:function(t,e,n){(function(t){function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments[1];switch(n.type){case"ADD STEP":return Object.assign({},t,{steps:[].concat(e(t.steps),[""]),focus:t.steps.length});case"INSERT STEP":return Object.assign({},t,{steps:[].concat(e(t.steps.slice(0,n.num)),[""],e(t.steps.slice(n.num)))});case"REMOVE STEP":return Object.assign({},t,{steps:t.steps.filter(function(t,e){return e!==n.num})});case"STEP INPUT":return Object.assign({},t,{steps:[].concat(e(t.steps.slice(0,n.num)),[n.input],e(t.steps.slice(n.num+1)))});case"FOCUS":return Object.assign({},t,{focus:n.num});case"FOCUS DECREMENT":var s=t.focus-1;return Object.assign({},t,{focus:s>0?s:0});case"FOCUS INCREMENT":var o=t.focus+1;return Object.assign({},t,{focus:o<t.steps.length?o:t.focus});default:return t}}function o(t,e){function n(e){var n=e.keyCode;9!==n&&13!==n&&38!==n&&40!==n||(e.preventDefault(),38===n||e.shiftKey&&9===n?y.dispatch({type:"FOCUS DECREMENT"}):13===n&&0===r.selectionStart?y.dispatch({type:"INSERT STEP",num:t}):13===n&&t===y.getState().steps.length-1?y.dispatch({type:"ADD STEP"}):9!==n&&13!==n&&40!==n||y.dispatch({type:"FOCUS INCREMENT"}))}function s(){y.dispatch({type:"FOCUS",num:t})}function o(e){var n=""===y.getState().steps[t];y.dispatch({type:"STEP INPUT",input:r.value,num:t}),!n||8!==e.keyCode&&46!==e.keyCode||1===y.getState().steps.length||(y.dispatch({type:"REMOVE STEP",num:t}),8!==e.keyCode&&y.getState().steps.length!==t||y.dispatch({type:"FOCUS DECREMENT"}))}function c(t){var e=a("<span></span>");e.innerText=t,p.innerText="Output",p.appendChild(e)}var u=a("<div class=step></div>"),i=a("<label>Input <input type=text></label>"),r=i.children[0],p=a("<div class=output>Output</div>");return r.value=e,r.addEventListener("keydown",n),r.addEventListener("keyup",o),r.addEventListener("click",s),u.appendChild(i),u.appendChild(p),{root:u,input:r,output:p,updateOutput:c}}function a(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]}function c(t,e){var n=void 0,s=void 0,o=void 0;try{n=i.parse(t);try{s=n.eval(e)}catch(t){s=i.simplify(n)}}catch(t){o=t.message}switch(e._=s||"",o="function"==typeof s?n.toString():s,o=void 0===o?"":o,void 0===o?"undefined":u(o)){case"object":o=o.format?o.format(14):o;break;case"number":ouput=i.format(o,14)}return o}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(148),r=n(527),p=r.createStore,d=n(543),l=n(544).default;d.use(l,{dialog:!0}),t.math=i;var f={steps:[],focus:0},y=p(s);t.store=y;var h=[];y.subscribe(function(){var t=y.getState();t.steps.length!==h.length&&(h=[],document.getElementById("steps").innerHTML=""),t.steps.forEach(function(e,n){var s=h[n];s||(s=o(n,e),h.push(s),document.getElementById("steps").appendChild(s.root)),s.scope=0===n?{}:Object.assign({},h[n-1].scope),s.updateOutput(c(e,s.scope)),t.focus!==n||s.input.activeElement||s.input.focus()})});new d({el:"#container",methods:{save:function(){console.log("save"),this.$modal.show("dialog",{text:"save"})},open:function(){console.log("open"),this.$modal.show("dialog",{text:"open"})}}});y.dispatch({type:"ADD STEP"})}).call(e,n(38))}},[146]);
//# sourceMappingURL=client.64afea77.js.map